<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Webhook Form — Demo</title>
  <style>
    :root{--bg:#0b1220;--card:#0f172a;--text:#e2e8f0;--muted:#94a3b8;--accent:#22d3ee;--line:#1e293b}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial}
    .wrap{max-width:720px;margin:40px auto;padding:0 20px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:20px}
    h1{margin:.2rem 0 1rem}
    label{display:block;margin:.6rem 0 .25rem;color:var(--muted)}
    input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--line);background:#0b1325;color:var(--text)}
    button{margin-top:12px;padding:10px 14px;border-radius:12px;border:1px solid transparent;background:var(--accent);color:#05202b;font-weight:700;cursor:pointer}
    .hint{color:var(--muted);font-size:.9rem;margin-top:10px}
    .ok{border-color:#1f6f3b}
    .err{border-color:#7f1d1d}
    .status{margin-top:10px;font-size:.95rem}
    code{background:#09101d;border:1px solid var(--line);padding:2px 6px;border-radius:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Webhook Demo (Static Page)</h1>
    <p class="hint">Submit this form to trigger a webhook. Update the action URL to your webhook endpoint.</p>

    <!-- OPTION 1 (guaranteed delivery, redirects in a new tab) -->
    <div class="card">
      <h3>Option 1: Direct POST (opens a new tab)</h3>
      <form
        action="https://YOUR_WEBHOOK_URL_HERE"
        method="post"
        target="_blank"
      >
        <label for="name1">Name</label>
        <input id="name1" name="name" placeholder="Your name" required />
        <label for="email1">Email</label>
        <input id="email1" name="email" type="email" placeholder="you@example.com" required />
        <!-- Extra metadata (optional) -->
        <input type="hidden" name="source" value="github-pages-static-form" />
        <button type="submit">Submit to Webhook</button>
        <div class="hint">This performs a standard HTML POST. Most webhook receivers will show the payload instantly.</div>
      </form>
    </div>

    <!-- OPTION 2 (AJAX; stays on page; requires CORS allowed by receiver) -->
    <div class="card" style="margin-top:16px">
      <h3>Option 2: AJAX POST (stays on page)</h3>
      <form id="ajaxForm">
        <label for="name2">Name</label>
        <input id="name2" name="name" placeholder="Your name" required />
        <label for="email2">Email</label>
        <input id="email2" name="email" type="email" placeholder="you@example.com" required />
        <button type="submit">Submit via AJAX</button>
        <div class="status" id="status"></div>
        <div class="hint">Requires the webhook endpoint to allow CORS. If blocked, use Option 1.</div>
      </form>
    </div>

    <div class="card" style="margin-top:16px">
      <h3>Current Endpoint</h3>
      <p>Replace <code>https://hook.relay.app/api/v1/playbook/cmfzccw7l22ov0qmbasdb3qwg/trigger/A06lYKXO7P8iP9y6FHxcgA</code> with your real endpoint (e.g., from webhook.site).</p>
    </div>
  </div>

  <script>
    const WEBHOOK_URL = "https://hook.relay.app/api/v1/playbook/cmfzccw7l22ov0qmbasdb3qwg/trigger/A06lYKXO7P8iP9y6FHxcgA"; // same as Option 1 action
    const form = document.getElementById('ajaxForm');
    const status = document.getElementById('status');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      status.textContent = "Sending…";
      const payload = {
        name: document.getElementById('name2').value,
        email: document.getElementById('email2').value,
        source: 'github-pages-ajax',
        sentAt: new Date().toISOString(),
        userAgent: navigator.userAgent
      };

      try {
        const res = await fetch(WEBHOOK_URL, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(payload),
          mode: 'cors' // if CORS blocked, switch to 'no-cors' (opaque) or use Option 1
        });
        if (res.ok) {
          status.textContent = "✅ Delivered to webhook.";
          status.parentElement.classList.add('ok');
        } else {
          status.textContent = "⚠️ Endpoint responded but not OK (" + res.status + "). Try Option 1.";
          status.parentElement.classList.add('err');
        }
      } catch(err) {
        status.textContent = "❌ Browser blocked or network error. Use Option 1 (direct POST).";
        status.parentElement.classList.add('err');
      }
    });
  </script>
</body>
</html>
